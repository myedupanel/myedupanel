/* Base Styles and Fonts */
.receiptContainer {
  font-family: 'Helvetica Neue', Arial, sans-serif;
  color: #333;
  background-color: #f4f7f6;
  max-height: 85vh; 
  overflow-y: auto;
}

/* Action buttons (Koi badlaav nahi) */
.actions {
  display: flex;
  justify-content: flex-end; 
  gap: 12px;
  padding: 12px 20px; 
  background-color: #ffffff;
  border-bottom: 1px solid #e0e0e0;
  position: sticky; 
  top: 0;
  z-index: 10;
  
  .downloadButton,
  .printButton {
    padding: 10px 20px;
    font-size: 0.9rem;
    font-weight: 600;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background-color: #007bff;
    color: white;
  }
}

/* --- PRINTABLE RECEIPT AREA (POORA BADLA GAYA) --- */

/* Yeh A4 page hai */
.a4Page {
  width: 210mm; 
  min-height: 297mm; /* A4 Height */
  margin: 16px auto; 
  background-color: #ffffff; 
  box-sizing: border-box;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  
  /* Dono hisson ko stack karne ke liye */
  display: flex;
  flex-direction: column;
}

/* Yeh page ka ek hissa hai (ek receipt) */
.receiptHalf {
  /* A4 height (297mm) / 2 = 148.5mm */
  flex-basis: 148.5mm; 
  flex-shrink: 0;
  flex-grow: 0;
  padding: 20px 25px; /* Padding inside the half */
  box-sizing: border-box;
  position: relative; /* copyType text ke liye */
  
  /* Har receipt apne andar content ko stack karega */
  display: flex;
  flex-direction: column;
  background-color: #ffffff; /* Print safety */
}

/* Dono hisson ke beech ki line */
.separator {
  border-bottom: 2px dashed #999;
  margin: 0 25px; /* Padding se match karega */
}

/* === STYLES FOR *ONE* RECEIPT (within .receiptHalf) === */
/* Yeh naye styles hain jo image se match karte hain */

/* 1. HEADER (Image ke jaisa) */
.header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  border-bottom: 3px double #333; 
  padding-bottom: 10px; 
  margin-bottom: 10px;

  .schoolDetails {
    display: flex;
    align-items: center;
    gap: 10px;
    h1 { font-size: 1.4rem; font-weight: 700; color: #000; margin: 0; }
    .logo { max-width: 50px; max-height: 50px; }
  }
  
  .copyType {
    position: absolute;
    top: 25px; /* Thoda neeche */
    left: 45%; /* Thoda left */
    font-size: 1rem;
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
  }
  
  .metaHeader {
    text-align: left;
    font-size: 0.8rem;
    padding-left: 10px;
    border-left: 1px solid #eee;
    p {
      margin: 1px 0;
      white-space: nowrap;
      strong { font-weight: 600; } 
    }
  }
}

/* 2. Central Title (Image ke jaisa) */
.titleMeta {
  text-align: center;
  margin-bottom: 15px; 
  h2 { 
    font-size: 1.2rem; 
    font-weight: 800; 
    color: #111;
    display: inline-block;
    padding: 0 10px;
    position: relative;
    /* Image jaisi lines */
    &::before, &::after {
      content: '';
      position: absolute;
      top: 50%;
      width: 50px;
      height: 2px;
      background-color: #555;
    }
    &::before { right: 100%; margin-right: 10px; }
    &::after { left: 100%; margin-left: 10px; }
  }
}

/* Common Section Heading */
.sectionHeading {
  font-size: 0.9rem; 
  font-weight: 700;
  color: #000; 
  margin: 0 0 8px 0; 
  text-transform: uppercase;
  border-bottom: 1px solid #eee;
  padding-bottom: 4px;
}

/* 3. Main Content Wrapper (Left/Right Split) */
.mainContentWrapper {
  display: flex; 
  flex-direction: row; 
  gap: 20px; 
  flex-grow: 1; /* Yeh footer ko bottom mein push karega */
  
  .mainContentLeft {
    flex: 1.5; /* 60% Width */
    min-width: 0;
  }
  .mainContentRight {
    flex: 1; /* 40% Width */
    min-width: 0;
  }
}

/* Student Info Grid (Left column mein) */
.studentGrid {
  display: grid;
  grid-template-columns: 1.5fr 1fr; /* 2 columns */
  gap: 6px 15px; 
  font-size: 0.85rem; 
  margin-bottom: 15px; /* Fee table se pehle space */
  p { margin: 0; strong {font-weight: 600; color: #000;} }
}

/* Fee Table */
.itemsTable {
  font-size: 0.85rem;
  width: 100%;
  border-collapse: collapse;

  thead tr { background-color: #f0f0f0; } 
  th { padding: 6px 8px; font-weight: 700; text-align: left; } 
  td { padding: 4px 8px; border-bottom: 1px solid #f0f0f0; } 
  
  .grandTotal {
    background-color: #f0f0f0; 
    font-size: 0.9rem; 
    td { font-weight: 700; border-bottom: none; }
  }
  .subtotal td { border-bottom: 1px solid #ddd; }
  .calcRow td { border-bottom: none; }
  .calcRow td:nth-child(2) { text-align: right; font-weight: 600; }
  .amountCol { text-align: right; }
}

/* Payment Details (Right column mein) */
.mainContentRight .grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px; 
  font-size: 0.85rem; 
  padding: 10px;
  background-color: #f8f9fa;
  border-radius: 4px;
  border: 1px solid #eee;
  
  p { margin: 0; strong {font-weight: 600; color: #000;} }
  .paidAmount {
    font-size: 1.1rem;
    font-weight: 700;
    color: #007bff;
  }
  .notes { font-style: italic; }
}
        
/* 4. Footer (Naya 3-part layout) */
.footer {
  display: flex;
  justify-content: space-between;
  align-items: flex-end; /* Sabko neeche align karega */
  margin-top: 20px; 
  padding-top: 10px; 
  border-top: 1px solid #ddd;
  font-size: 0.8rem;
  
  .footerReceivedBy {
    flex: 1;
    p { margin: 0; font-weight: 600; }
  }
  
  .footerBalance {
    flex: 1;
    text-align: center;
    p { margin: 0 0 5px 0; font-weight: 600; }
    .balanceAmount {
      font-weight: 700;
      font-size: 1rem; 
      &[data-balance-zero="true"] { color: #28a745; }
      &:not([data-balance-zero="true"]) { color: #dc3545; }
    }
    .paidStamp {
      font-size: 1rem;
      font-weight: 800;
      color: #28a745;
      text-transform: uppercase;
    }
    .statusBadge {
      font-weight: 700; padding: 3px 8px; border-radius: 4px;
      font-size: 0.75rem; color: #fff; text-transform: uppercase;
      &.partial { background-color: #fd7e14; }
      &.pending { background-color: #ffc107; }
      &.failed { background-color: #dc3545; }
    }
  }
  
  .footerSignature {
    flex: 1;
    text-align: center;
    .signatureLine {
      display: block;
      border-top: 1px solid #000;
      margin: 0 auto 5px auto;
      width: 80%;
      padding-top: 25px; /* Signature ke liye space */
    }
    p { margin: 0; font-weight: 600; }
  }
}

.footerNote { 
  text-align: center; 
  margin-top: 10px; 
  font-size: 0.75rem;
  font-weight: 600; 
}

/* --- FINAL PRINT MEDIA QUERY --- */
@media print {
  .actions { display: none !important; }
  
  .a4Page {
    width: 100% !important;
    min-height: auto !important;
    margin: 0 !important; 
    box-shadow: none !important;
    background-color: #ffffff !important;
  }
  
  .receiptHalf {
    height: 148.5mm !important; /* A4 ka aadha */
    padding: 10mm !important; 
    box-sizing: border-box !important;
    page-break-after: avoid !important;
    page-break-inside: avoid !important;
    background-color: #ffffff !important;
  }
  
  .separator {
    display: none; /* Print mein line nahi dikhegi */
  }
  
  /* Force colors */
  .balanceAmount, .paidStamp, .statusBadge, .paidAmount {
    -webkit-print-color-adjust: exact !important; 
    print-color-adjust: exact !important;
  }
  /* Backgrounds ko print mein transparent karein */
  .mainContentRight .grid {
    background-color: #ffffff !important;
    border: 1px solid #ddd !important;
  }
  .itemsTable thead tr, .grandTotal {
    background-color: #f0f0f0 !important;
  }
}